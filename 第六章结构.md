# 结构
结构是一个或多个变量的集合，这些变量可能为不同的类型，为了处理的方便而将这些变量组织在一个名字之下。结构可以拷贝、赋值、传递给函数，函数也可以返回结构类型。结构是值传递的，与数组不同。

## 基本知识
结构声明：
```C
struct point {
    int x;
    int y;
};

struct point pt;    //使用结构标记简写声明
struct point maxpt = { 320, 200};   //初始化

struct {...} x, y, x;   //这种声明与int x, y, z类似
```
struct关键字后面的名字可选，称为结构标记。结构标记用于为结构命名，在定义之后，结构标记就代表花括号内的声明，**可以用它作为该声明的简写形式**。  
结构中定义的变量称为成员。结构成员、结构标记、普通变量可以采用相同的名字，不会冲突。结构可以嵌套。
引用结构中的成员:
```C
结构名.成员
p->结构成员 //这里p是一个指向结构的指针
```

千万不要认为结构的长度等于各成员长度之和，因为不同对象有不同的对齐要求，所以结构中可能会出现空穴

## 结构与函数
结构的合法操作只有几种：作为一个整体复制和赋值，通过&运算取地址，访问其成员。其中复制和赋值包括向函数传递参数及从函数返回值。注意结构成员运算符“.”的优先级比“\*”的优先级高。

## 结构数组
定义：
```C
struct key {
    char *word;
    int count;
} keytab[NKEYS];
//等同于下面的形式
struct key {
    char *word;
    int count;
};
struct key keytab[NKEYS];
```

一元运算符sizeof计算对象的长度。表达式`sizeof 对象`及`sizeof(类型名)`将返回一个整型值，等于占用的存储空间字符数。条件编译语句#if不能使用sizeof，因为预处理器不对类型名进行分析。但在#define中使用是合法的。

## 类型定义（typedef）
typedef用来建立新的数据类型名，用于使类型名更加具有意义或简化复杂声明、提高程序可移植性。定义：
```C
typedef char *String;   //将String定义与char *同意义
Stirng p;   //等同于char *p;
```
通常将typedef定义的类型名的首字母大写，以示区别。
typedef类似于#define，但由于typedef是由编译器解释的，因此它的文本替换功能要超过预处理器的能力。

## 联合
联合可以在不同时刻保存不同类型和长度的对象的变量，编译器负责跟踪对象的长度和对齐要求。以单块内存中管理不同类型的数据。定义：
```C
union u_tag {
    int ival;
    float fval;
    char *sval;
} u;    //u必须足够大，以保存这3种类型中最大的一种，这3种类型中任何一种类型的对象都可以赋值给u。
```

访问联合中的成员：
```C
联合名.成员
联合指针->成员
```

联合可用于结构和数组中，反之也可。实际上联合就是一个结构，它的所有成员相对于基地址的偏移量都为0。对齐方式要适合联合中所有类型的成员。对联合允许的操作与对结构允许的操作相同。联合只能用其第一个成员类型的值进行初始化。

## 位字段
位字段只能定义于结构中，不能单独定义。作用在于节省空间。定义：
```C
unsigned int b : 1;
```
